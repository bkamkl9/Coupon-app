import{u as k,g as _,_ as h}from"./useLocalStorageFavourite-4BNA4vMQ.js";import{d as C,r as v,i as w,o as j,c as o,b as a,j as c,w as B,k as U,F as z,f as E,l as L,u,g as s}from"./index-yDHNx3tV.js";const N={class:"h-[calc(100vh-116px-32px)] overflow-y-auto p-4"},T={key:0,class:"flex justify-center items-center p-8"},V={key:1,class:"flex flex-col items-center justify-center p-8 text-center"},S={key:2},D={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},q=C({__name:"favourite",setup(M){const f=_(),{isFavourite:d,favourite:n,handleToggleFavourite:g,isUpdatingFavourite:p,getFavouriteCount:m}=k(),r=v([]),l=v(!1),y=w(()=>n.value.length>0);j(async()=>{await b()});async function b(){if(n.value.length===0){r.value=[];return}l.value=!0;try{const{data:t,error:e}=await f.from("Coupons").select("*").in("id",n.value).order("created_at",{ascending:!1});e?console.error("Error fetching favourite coupons:",e):r.value=t||[]}catch(t){console.error("Error fetching favourite coupons:",t)}finally{l.value=!1}}function x(t){g(t),d(t.id)||(r.value=r.value.filter(e=>e.id!==t.id))}return(t,e)=>{const F=U("router-link");return s(),o("div",N,[l.value?(s(),o("div",T,[...e[0]||(e[0]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-600"},null,-1)])])):y.value?(s(),o("div",S,[e[5]||(e[5]=a("h1",{class:"text-2xl font-bold text-gray-800 mb-6"},"Ulubione kupony",-1)),a("div",D,[(s(!0),o(z,null,E(r.value,i=>(s(),o("div",{key:i.id},[c(h,{class:"h-full",coupon:i,isFavourite:u(d)(i.id),isUpdatingFavourite:u(p)(i.id),favouriteCount:u(m)(i),onToggleFavourite:x},null,8,["coupon","isFavourite","isUpdatingFavourite","favouriteCount"])]))),128))])])):(s(),o("div",V,[e[2]||(e[2]=a("div",{class:"text-6xl mb-4"},"ğŸ’”",-1)),e[3]||(e[3]=a("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Brak ulubionych kuponÃ³w",-1)),e[4]||(e[4]=a("p",{class:"text-gray-500 mb-6"},"Dodaj kupony do ulubionych, aby zobaczyÄ‡ je tutaj",-1)),c(F,{to:"/",class:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors"},{default:B(()=>[...e[1]||(e[1]=[L(" PrzeglÄ…daj kupony ",-1)])]),_:1})]))])}}});export{q as default};
